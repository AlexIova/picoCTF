# Notes

It is easy to see from the code (and the name of the challenge also) that this challenge is an exercise on the format string attack

## Format string attack

Owasp link explaining the Format string Attack: 
https://owasp.org/www-community/attacks/Format_string_attack

## Reasoning notes on the attack

### Flow of the program 

The first function to be executed is `serve_patrick()`. If we do not send something on the menu then another branch on the line `67` is executed.
We can see that we can go to the function `serve_bob()` if the `printf()` function returns a value greater than 2. Using the linux manual with `man 3 printf` we can read: "*Upon successful return, these functions return the number of characters printed (excluding the null byte used to end output to strings).*"

In the `serve_bob()` function we can see at line `94` that if something is not in the menu then we go to the *else* branch where an unsecure `printf()` is done. It is done directly using the input values and not formatting them. This as the above links show is vulnerable to attack.


### Building the attack
We saw that we should first serve as input to the program something that has 3 or more characters in order to get to the `serve_bob()` function.


## Solution ðŸ˜”

All this complicated reasoning and I didn't realize this line `signal(SIGSEGV, sigsegv_handler)` where the handler just prints the flag. 
I just needed to make the program go in segmentation fault, to do this I just needed to get an input greater than `BUFSIZE`. While playing with the program even the hints of the program helped a little too much :(

